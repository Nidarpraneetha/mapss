<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sharp Red Heat Dots</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html, body { height:100%; margin:0; }
    #map { width:100%; height:100vh; }
    .count-label {
      font-size: 11px;
      font-weight: bold;
      color: black;
      text-shadow: 1px 1px 2px white;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script>
    const rawData = [
      ['Brazil', 10.65, 52.95, 1],
      ['Canada', 56.13, -106.35, 3],
      ['China', 35, 103, 259],
      ['Finland', 64, 26, 2],
      ['Hong Kong', 22.3, 114.2, 24],
      ['India', 20, 77, 2],
      ['Korea (Republic of)', 35.86, 127.1, 27],
      ['Mauritius', -20.35, 57.5, 1],
      ['Netherlands', 52.3, 5.3, 1],
      ['Philippines', 12.88, 122, 1],
      ['Russian Federation', 55, 103, 5],
      ['Singapore', 1.29, 103.85, 6],
      ['Türkiye', 39, 35, 2],
      ['United Kingdom', 55, -3.4, 10],
      ['United States of America', 37.09, -95.7, 25]
    ];

    const maxLead = Math.max(...rawData.map(d => d[3]));
    const heatPoints = rawData.map(d => [d[1], d[2], d[3] / maxLead]);

    const map = L.map('map').setView([20, 10], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    L.heatLayer(heatPoints, {
      radius: 25,   // tighter radius
      blur: 5,      // less blur = sharper red dot
      maxZoom: 6,
      gradient: {
        0.4: 'red',
        1.0: 'darkred'
      }
    }).addTo(map);

    // Add numeric labels
    rawData.forEach(([country, lat, lng, leads]) => {
      const icon = L.divIcon({
        className: 'count-label',
        html: String(leads),
        iconSize: null
      });
      L.marker([lat, lng], { icon: icon, interactive: false }).addTo(map);
    });

    map.fitBounds(L.latLngBounds(rawData.map(d => [d[1], d[2]])).pad(0.25));
  </script>
</body>
</html>
